<!DOCTYPE html>
<html>
<head>
  <title>Toggle Tab Cloak</title>
</head>
<body>
  <button id="toggleButton">Enable Tab Cloak</button>

  <script>
    function setCookie(name, value, days) {
      var expires = "";
      if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        expires = "; expires=" + date.toUTCString();
      }
      document.cookie = name + "=" + (value || "") + expires + "; path=/";
    }

    function getCookie(name) {
      var nameEQ = name + "=";
      var cookies = document.cookie.split(";");
      for (var i = 0; i < cookies.length; i++) {
        var cookie = cookies[i];
        while (cookie.charAt(0) == " ") {
          cookie = cookie.substring(1, cookie.length);
        }
        if (cookie.indexOf(nameEQ) === 0) {
          return cookie.substring(nameEQ.length, cookie.length);
        }
      }
      return null;
    }

    function eraseCookie(name) {
      document.cookie = name + "=; Max-Age=-99999999; path=/";
    }

    function toggleTabCloak() {
      var isCloakEnabled = getCookie("tabCloakEnabled");
      if (isCloakEnabled === "true") {
        // Tab cloak is currently enabled, disable it
        eraseCookie("tabCloakEnabled");
        document.getElementById("toggleButton").innerText = "Enable Tab Cloak";
      } else {
        // Tab cloak is currently disabled, enable it
        setCookie("tabCloakEnabled", "true", 365);
        document.getElementById("toggleButton").innerText = "Disable Tab Cloak";
        // Run your script here
        class ABC {
          constructor(config = {}) {
            this.type = config.type || "blank";
            this.url = config.url || "about:blank";
          }
          setType(type) {
            if (!type) return;
            this.type = type;
          }
          setUrl(url) {
            if (!url) return;
            this.url = url;
          }
          getCode() {
            return `<iframe style="height:100%; width: 100%; border: none; position: fixed; top: 0; right: 0; left: 0; bottom: 0; border: none" sandbox="allow-forms allow-modals allow-orientation-lock allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-presentation allow-same-origin allow-scripts allow-top-navigation allow-top-navigation-by-user-activation" src="${this.url}"></iframe>`;
          }
          open() {
            if (this.type == "blank") {
              try {
                var page = window.open();
                page.document.body.innerHTML = `<iframe style="height:100%; width: 100%; border: none; position: fixed; top: 0; right: 0; left: 0; bottom: 0; border: none" sandbox="allow-forms allow-modals allow-orientation-lock allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-presentation allow-same-origin allow-scripts allow-top-navigation allow-top-navigation-by-user-activation" src="${this.url}"></iframe>`;
                return page;
              } catch {}
            } else if (this.type == "blob") {
              try {
                var page = new Blob([`<iframe style="height:100%; width: 100%; border: none; position: fixed; top: 0; right: 0; left: 0; bottom: 0; border: none" sandbox="allow-forms allow-modals allow-orientation-lock allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-presentation allow-same-origin allow-scripts allow-top-navigation allow-top-navigation-by-user-activation" src="${this.url}"></iframe>`], {type: "text/html"});
                return window.open(URL.createObjectURL(page));
              } catch {}
            } else if (this.type == "overwrite") {
              try {
                document.body.innerHTML = `<iframe style="height:100%; width: 100%; border: none; position: fixed; top: 0; right: 0; left: 0; bottom: 0; border: none" sandbox="allow-forms allow-modals allow-orientation-lock allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-presentation allow-same-origin allow-scripts allow-top-navigation allow-top-navigation-by-user-activation" src="${this.url}"></iframe>`;
                return;
              } catch {}
            }
          }
        }

        // Create an instance of ABC and run the open method
        var abc = new ABC();
        abc.open();
      }
    }

    document.getElementById("toggleButton").addEventListener("click", toggleTabCloak);
  </script>
</body>
</html>
